version: '3.7'

services:

    redis:
        restart: unless-stopped
        image: redis:latest
        ports:
            - 6379:6379
        container_name: redis
        volumes:
            - ./data/redis:/data
        command: ["redis-server", "--appendonly", "yes","--requirepass","WI4p82wr0i3cSwn0"]

    redis-commander:
        restart: unless-stopped
        image: rediscommander/redis-commander:latest
        environment:
            - REDIS_HOST=redis
            - REDIS_PASSWORD=WI4p82wr0i3cSwn0
            - HTTP_USER=root
            - HTTP_PASSWORD=com.root.admin.123
        ports:
            - 56379:8081
        depends_on:
            - redis

    mysql:
        restart: unless-stopped
        image: mysql:8.0.22
        container_name: mysql
        ports:
            - 3306:3306
        volumes:
            - ./data/mysql:/var/lib/mysql
            - ./mysql/root:/root:ro
        environment:
            - MYSQL_ROOT_PASSWORD=gRrcYm07lj7Q

    phpmyadmin:
        restart: unless-stopped
        image: phpmyadmin/phpmyadmin
        container_name: phpmyadmin
        ports:
            - '53306:80'
        environment:
            PMA_ARBITRARY: 1
        depends_on:
            - mysql